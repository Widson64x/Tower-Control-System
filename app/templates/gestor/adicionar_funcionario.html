{% extends 'base.html' %}

{% block title %}Adicionar Funcionário | Tower Control{% endblock %}

{% block content %}
<h1 class="mb-4 fw-bold text-primary">Adicionar Funcionário</h1>
<script src="https://unpkg.com/imask"></script>

<form method="POST">
    <div class="mb-3">
        <label class="form-label">Selecione o Usuário</label>
        <select class="form-select" name="user_id" required>
            <option value="">Selecione...</option>
            {% for user in usuarios %}
                <option value="{{ user.id }}">{{ user.nome }} ({{ user.email }})</option>
            {% endfor %}
        </select>
    </div>
    <div class="mb-3">
        <label class="form-label">Data de Entrada</label>
        <input type="date" class="form-control" name="data_entrada" required>
    </div>
    <div class="mb-3">
        <label class="form-label">Cargo</label>
            <select class="form-select" name="cargo" required>
                <option value="">Selecione...</option>
                <option value="Assistente I">Assistente I</option>
                <option value="Assistente II">Assistente II</option>
                <option value="Assistente III">Assistente III</option>
                <option value="Analista I">Analista I</option>
                <option value="Analista II">Analista II</option>
                <option value="Analista III">Analista III</option>
                <option value="Focal">Focal</option>
                <option value="Especialista">Especialista</option>
                <option value="Supervisor">Supervisor</option>
                <option value="Coordenador">Coordenador</option>
                <option value="Gerente">Gerente</option>
            </select>
    </div>
    <div class="mb-3">
        <label class="form-label">Salário</label>
        <input type="text" class="form-control" name="salario" id="salario" placeholder="R$0,00" required>
    </div>

    <script>
        const salarioElement = document.getElementById('salario');
        const maskOptions = {
            mask: 'R$ num',
            blocks: {
                num: {
                    mask: Number,
                    scale: 2,
                    thousandsSeparator: '.',
                    radix: ',',
                    mapToRadix: [','],  // Use apenas ',' como separador decimal
                    normalizeZeros: true,
                    padFractionalZeros: true
                }
            },
            lazy: false  // Força exibição do valor com casas decimais
        };
        IMask(salarioElement, maskOptions);
    </script>
    <button type="submit" class="btn btn-success">Salvar</button>
    <a href="{{ url_for('funcionarios.lista_funcionarios') }}" class="btn btn-secondary">Cancelar</a>
</form>
{% endblock %}
